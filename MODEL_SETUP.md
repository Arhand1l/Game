# Инструкция по установке новой модели (FBX)

Я подготовил скрипты, чтобы они поддерживали новую 3D модель. Теперь вам нужно выполнить несколько действий в редакторе Godot.

## Шаг 1: Проверьте импорт
1. Переключитесь в окно **Godot Editor**.
2. В панели **FileSystem** (внизу слева) должна появиться папка `res://assets/models/player/`.
3. Внутри должен быть файл `soldier.fbx`. Если Godot его не видит, нажмите правой кнопкой мыши на папку `assets` и выберите **"Rescan"**.

## Шаг 2: Изменение сцены игрока
1. Откройте сцену `res://scenes/player.tscn` (двойной клик).
2. Вы увидите старую модель из кубиков (Node3D с именем `Body` и кучами MechInstance внутри).

### Вариант А: Быстрая замена
1. Выделите ноду `Body` в дереве сцены.
2. В файловой системе найдите `soldier.fbx` и перетащите его прямо в сцену, сделав его дочерним к `Body` (или заменив содержимое `Body`).
   - *Лучше всего:* Нажмите правой кнопкой на `soldier.fbx` -> **New Inherited Scene**. Откроется новая сцена. Сохраните её как `soldier_model.tscn`.
   - В `player.tscn`: Удалите все старые кубики (`Torso`, `Head`, `LegLeft`, etc) из ноды `Body`.
   - Перетащите `soldier_model.tscn` внутрь ноды `Body`.

### Вариант Б: Удаление старого и добавление нового
1. Удалите все дочерние ноды у `Body` (Torso, Head, ShoulderLeft, ShoulderRight...).
2. Перетащите `soldier.fbx` внутрь `Body`.
3. **ВАЖНО:** Если модель слишком большая или маленькая, измените `Scale` у ноды `Body` (например, на `0.01` или `1.0`).

## Шаг 3: Настройка оружия и звуков
Новая модель удалит старые точки крепления оружия. Вам нужно их восстановить:

1. Внутри модели найдите кость правой руки (обычно в скелете).
2. Создайте ноду **BoneAttachment3D** (прикрепите к скелету).
3. Выберите кость правой руки в свойствах BoneAttachment3D.
4. Внутри этой BoneAttachment3D создайте структуру:
   ```
   WeaponHolder (Node3D)
     Weapon (MeshInstance3D - ваше оружие)
       Muzzle (Node3D - точка вылета пули)
         MuzzleFlash (MeshInstance3D)
       GunShotSound (AudioStreamPlayer3D)
       ReloadSound (AudioStreamPlayer3D)
   ```
   *Вы можете просто скопировать `WeaponHolder` из старой модели перед удалением и вставить его в новую!*

## Шаг 4: Анимации
Скрипт `player.gd` теперь ищет **AnimationPlayer**.
- Если в вашем FBX есть анимации, они появятся в AnimationPlayer.
- Скрипт ожидает названия: `"Idle"`, `"Walk"`, `"Run"`, `"Jump"`, `"Shoot"`, `"Reload"`.
- Если названия другие (например "mixamo.com"), переименуйте их в AnimationPlayer.

## Готово!
Запустите игру (F5). Если модель не двигается, проверьте названия анимаций. Скрипт автоматически подхватит новую модель и не будет выдавать ошибок, даже если вы удалили старые части тела.
